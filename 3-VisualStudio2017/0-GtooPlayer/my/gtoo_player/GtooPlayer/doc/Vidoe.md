# 视频解码流程


打开输入流：

使用FFmpeg等库提供的函数，如avformat_open_input，打开视频文件或流，获取解封装上下文。
读取流信息：

使用avformat_find_stream_info函数读取媒体文件的数据包，获取视频流的基本信息，如时长、帧率等。
选择视频流：

使用av_find_best_stream等函数，确定视频流的索引，以便后续获取详细的视频流信息。
获取视频流详细信息：

通过解封装上下文得到的视频流索引，获取视频流的详细信息，如分辨率、帧率、总帧数、解码器等。
初始化解码器上下文：

根据视频流的解码器ID，使用avcodec_alloc_context3分配解码器上下文，并进行必要的初始化。
设置解码器参数：

使用avcodec_parameters_to_context将视频流的参数复制到解码器上下文中，为解码做好准备。
打开解码器：

使用avcodec_open2打开视频解码器，使其处于可用状态。
分配缓冲区：

根据视频流的属性，使用av_image_get_buffer_size等函数计算缓冲区的大小，并分配足够的内存用于存储解码后的图像数据。
解码：

进入解码循环，使用av_read_frame读取视频帧的压缩数据，然后使用avcodec_receive_frame进行解码，得到解码后的图像数据。
后续处理：

可以对解码后的图像进行进一步处理，如渲染、显示或保存等。
释放资源：
在视频解码结束后，需要释放申请的资源，包括解码器上下文、缓冲区等。